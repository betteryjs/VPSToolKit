# VPSToolKit 交互式菜单使用指南

## 概述

VPSToolKit 2.0 采用了类似 NodeScriptKit 的交互式菜单系统，提供更友好的用户体验。

## 特性

### 🎯 交互式光标选择

- 使用 **↑/↓** 箭头键或 **j/k** 键移动光标
- 当前选中项会高亮显示（绿色 > 标记）
- 按 **回车键** 确认选择

### 📂 多级菜单导航

- `[+]` - 表示有子菜单的项目
- `[x]` - 退出选项
- 自动记录菜单历史，支持返回上级

### 🎨 可视化界面

```
██╗   ██╗██████╗ ███████╗████████╗ ██████╗  ██████╗ ██╗     ██╗  ██╗██╗████████╗
...
VPS 服务统一管理脚本 v2.0.0

━━━━━━━━━━ 主菜单 ━━━━━━━━━━

 > [+] 代理服务管理
   [+] 系统工具
   [+] 实用工具
   [x] 退出

━━━━━━━━━━ 提醒 ━━━━━━━━━━
回车进入主菜单

使用↑/↓或者j/k来移动光标
Powered by www.nodeseek.com
```

## 操作说明

### 键盘快捷键

| 按键   | 功能                  |
| ------ | --------------------- |
| ↑ 或 k | 向上移动光标          |
| ↓ 或 j | 向下移动光标          |
| 回车   | 确认选择 / 进入子菜单 |
| q      | 返回上级菜单 / 退出   |

### 使用流程

1. **启动菜单**
   ```bash
   m
   ```

2. **浏览菜单**
   - 使用方向键或 j/k 浏览选项
   - 当前选项会高亮显示

3. **进入子菜单**
   - 移动到想要的菜单项
   - 按回车键进入

4. **执行脚本**
   - 在具体功能项上按回车
   - 脚本执行完毕后按回车返回菜单

5. **返回/退出**
   - 按 q 键返回上级菜单
   - 在主菜单选择"退出"或按 q 退出程序

## 菜单结构

```
主菜单
├── 代理服务管理
│   ├── AnyTLS 管理
│   ├── Shadowsocks 管理
│   ├── Trojan-Go 管理
│   ├── Snell v4 管理
│   └── Snell v5 管理
├── 系统工具
│   ├── BBR 加速管理
│   └── DD 重装系统
└── 实用工具
    └── Speedtest 网络测速
```

## 技术实现

### 纯 Bash 实现

VPSToolKit 的交互式菜单使用纯 Bash 脚本实现，无需额外依赖：

- 使用 `tput` 控制终端
- 使用 `read -rsn1` 读取键盘输入
- ANSI 转义序列控制颜色和光标

### 关键技术点

1. **光标控制**
   ```bash
   tput civis  # 隐藏光标
   tput cnorm  # 显示光标
   tput cup row col  # 移动光标
   ```

2. **键盘输入**
   ```bash
   read -rsn1 key  # 读取单个字符
   # 处理方向键（ESC序列）
   ```

3. **颜色显示**
   ```bash
   \033[32m  # 绿色
   \033[31m  # 红色
   \033[0m   # 重置
   ```

## 与 NodeScriptKit 的对比

| 特性     | VPSToolKit | NodeScriptKit |
| -------- | ---------- | ------------- |
| 交互方式 | 光标选择 ✅ | 光标选择 ✅    |
| 配置系统 | TOML ✅     | TOML ✅        |
| 实现语言 | Pure Bash  | Go (nskCore)  |
| 依赖     | 无         | 需要 nskCore  |
| 性能     | 快速       | 非常快速      |
| 可移植性 | 高         | 需要编译      |

## 优势

### 🚀 零依赖

- 纯 Bash 实现，无需安装额外程序
- 兼容所有支持 Bash 的 Linux 系统

### 🎨 友好界面

- 类似 Vim 的操作方式
- 直观的可视化反馈
- 清晰的菜单层级

### 🔧 易于扩展

- 基于 TOML 配置
- 支持本地扩展
- 支持远程订阅

## 故障排除

### 问题：光标移动不正常

**原因**：终端不支持某些控制序列

**解决**：
- 确保使用现代终端（如 xterm、gnome-terminal）
- 检查 TERM 环境变量：`echo $TERM`

### 问题：颜色显示异常

**原因**：终端颜色支持问题

**解决**：
- 确保终端支持 256 色
- 使用 `export TERM=xterm-256color`

### 问题：按键无响应

**原因**：终端输入模式问题

**解决**：
- 重启终端会话
- 检查是否在 tmux/screen 中运行

## 未来计划

- [ ] 添加搜索功能
- [ ] 支持鼠标点击
- [ ] 主题自定义
- [ ] 开发 Go 版本 vtkCore（性能提升）
- [ ] 更多动画效果

## 反馈

如有问题或建议，请在 GitHub Issues 中反馈：
https://github.com/betteryjs/VPSToolKit/issues

---

享受新的交互式体验！ 🎉
